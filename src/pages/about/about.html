<ion-header>	
  <ion-navbar>
    <ion-title>
      blog - comentarios
      <span class="glyphicon glyphicon-pencil text-success marco"
      	(click)="editPost.hidden = !editPost.hidden; 
      					 listPosts.hidden = !listPosts.hidden">
      </span>
    </ion-title>
  </ion-navbar>  
</ion-header>

<ion-content padding>


<div #listPosts>
<h4>últimas publicaciones</h4>
	<div>		
			<div *ngFor="let p of posts.rows" 				
			  (click)="leerMas.hidden = !leerMas.hidden">
				<span class="text-success h3">{{p.value}}</span>
				<p>({{p.key}})</p>
			
				<div #leerMas hidden>
					<div [innerHtml]="p.doc.texto"></div>
				</div>
			</div>
		
	</div>
</div>


<div #editPost hidden>
<h4>nuevo post
	<span class="glyphicon glyphicon-cog marco text-danger" 
		(click)="idRev.hidden = !idRev.hidden">
	</span>
</h4>
	<div #idRev hidden="true" class="marco row">
		<div class="col-xs-6">
			<input [(ngModel)]="post._id" 
				class="form-control"
				placeholder="id" />
		</div>	
		<div class="col-xs-6">
			<span (click)="getPost(post._id); idRev.hidden = true" 
				class="glyphicon glyphicon-download-alt marco text-success"></span>
		</div>
	</div>

	<div class="row">

		<div class="col-xs-4">
			<input [(ngModel)]="post.fecha" class="form-control" placeholder="fecha (aaaa-mm-dd)" />
		</div>

		<div class="col-xs-8">
			<input [(ngModel)]="post.titulo" class="form-control" placeholder="titulo" />
		</div>

	</div>
	<br>
	<div class="row padd">
		<textarea [(ngModel)]="post.texto" 
			class="form-control" 
			placeholder="redacta el artículo en HTML"
			rows="20"></textarea>
	</div>

	<div class="row padd">
		<div [innerHtml]="post.texto" ></div>
	</div>

	<span class="btn btn-success" (click)="publicar(post)"	>publicar</span>
</div>


<!-- 
// subir leccion desde archivo 
// de momento desactivado:
// a) preparo sesión con iokos.byviolet.es
// b) la subo en JSON con Futon en Smileupps
// c) replico en Getafe

	<div *ngIf="newlesson">
		<p>cargada ok la lección 
		<span class="h4 text-success">{{newlesson.titulo}}</span>	
		<span title="guardar en Ionic"
			class="glyphicon glyphicon-ok text-success marco" 
			(click)="db.collection('lecciones').store(newlesson)"
			></span>
			</p>
	</div>
 	
 	<div hidden>
 		<input #fileBanco
 			type="file"  			
 			(change)="uploadDb($event)"/>
 	</div>
-->


</ion-content>
